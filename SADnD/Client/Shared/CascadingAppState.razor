@using System.Security.Claims
@inject NoteApiManager noteManager

<CascadingValue Value="this">
    @ChildContent
</CascadingValue>

@code {
    [CascadingParameter]
    public Task<AuthenticationState> authenticationStateTask { get; set; }
    [Parameter]
    public RenderFragment ChildContent { get; set; }

    private string userId;
    private IEnumerable<Claim> claims;

    public string UserId
    {
        get
        {
            userId = authenticationStateTask.Result.User.Claims.Where(x => x.Type == "sub").FirstOrDefault().Value;
            return userId;
        }
    }
    public IEnumerable<Claim> Claims
    {
        get
        {
            claims = authenticationStateTask.Result.User.Claims;
            return claims;
        }
    }
    public IEnumerable<Note> Notes { get; set; }
    public async Task GetNotes()
    {
        Notes = await noteManager.GetAll();
    }
    protected override async Task OnInitializedAsync()
    {

        await GetNotes();
    }
}